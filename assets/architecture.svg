<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f0f23;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a1a3e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cyanGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#00d9ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00a8cc;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#00ff88;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00cc6a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#a855f7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="url(#bgGrad)"/>
  
  <!-- Grid pattern -->
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#ffffff" stroke-width="0.5" opacity="0.05"/>
  </pattern>
  <rect width="800" height="600" fill="url(#grid)"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="'Segoe UI', Arial, sans-serif" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">
    RLM Architecture
  </text>
  
  <!-- USER QUERY Box -->
  <rect x="250" y="60" width="300" height="50" rx="8" fill="#1e3a5f" stroke="url(#cyanGrad)" stroke-width="2"/>
  <text x="400" y="90" font-family="monospace" font-size="14" fill="#00d9ff" text-anchor="middle">
    User Query + Context
  </text>
  
  <!-- Arrow down -->
  <path d="M 400 110 L 400 140 L 390 130 M 400 140 L 410 130" stroke="#00d9ff" stroke-width="2" fill="none"/>
  
  <!-- RLM LAYER Box -->
  <rect x="50" y="150" width="700" height="300" rx="12" fill="#151530" stroke="url(#purpleGrad)" stroke-width="2"/>
  <text x="400" y="175" font-family="'Segoe UI', Arial, sans-serif" font-size="16" font-weight="bold" fill="#a855f7" text-anchor="middle">
    RLM LAYER
  </text>
  
  <!-- ROOT LLM Box -->
  <rect x="80" y="190" width="280" height="100" rx="8" fill="#1e1e3f" stroke="url(#cyanGrad)" stroke-width="1.5"/>
  <text x="220" y="215" font-family="'Segoe UI', Arial, sans-serif" font-size="14" font-weight="bold" fill="#00d9ff" text-anchor="middle">
    ROOT LLM (Qwen3)
  </text>
  <text x="220" y="240" font-family="monospace" font-size="11" fill="#888888" text-anchor="middle">
    âš ï¸ Never sees full context!
  </text>
  <text x="220" y="260" font-family="monospace" font-size="11" fill="#888888" text-anchor="middle">
    âœ… Only query + REPL access
  </text>
  <text x="220" y="280" font-family="monospace" font-size="11" fill="#00ff88" text-anchor="middle">
    Generates Python code
  </text>
  
  <!-- REPL Box -->
  <rect x="420" y="190" width="300" height="240" rx="8" fill="#0a1628" stroke="url(#greenGrad)" stroke-width="1.5"/>
  <text x="570" y="215" font-family="'Segoe UI', Arial, sans-serif" font-size="14" font-weight="bold" fill="#00ff88" text-anchor="middle">
    REPL ENVIRONMENT
  </text>
  
  <!-- Context variable -->
  <rect x="440" y="230" width="260" height="40" rx="4" fill="#0d2137"/>
  <text x="450" y="255" font-family="monospace" font-size="12" fill="#00d9ff">
    context = "...10M+ tokens..."
  </text>
  
  <!-- Helper functions -->
  <text x="450" y="290" font-family="monospace" font-size="11" fill="#888888">ğŸ“¦ Available Functions:</text>
  <text x="460" y="310" font-family="monospace" font-size="10" fill="#00ff88">â”œâ”€â”€ peek(start, length)</text>
  <text x="460" y="325" font-family="monospace" font-size="10" fill="#00ff88">â”œâ”€â”€ grep(pattern)</text>
  <text x="460" y="340" font-family="monospace" font-size="10" fill="#00ff88">â”œâ”€â”€ chunk(size, overlap)</text>
  <text x="460" y="355" font-family="monospace" font-size="10" fill="#00ff88">â”œâ”€â”€ head(n) / tail(n)</text>
  <text x="460" y="370" font-family="monospace" font-size="10" fill="#a855f7">â””â”€â”€ ask_llm() â†’ Recursive!</text>
  
  <!-- SUB-LLM Box -->
  <rect x="80" y="310" width="280" height="70" rx="8" fill="#1e1e3f" stroke="url(#purpleGrad)" stroke-width="1.5" stroke-dasharray="5,5"/>
  <text x="220" y="335" font-family="'Segoe UI', Arial, sans-serif" font-size="13" fill="#a855f7" text-anchor="middle">
    SUB-LLM CALLS
  </text>
  <text x="220" y="355" font-family="monospace" font-size="10" fill="#888888" text-anchor="middle">
    Recursive queries over subsets
  </text>
  <text x="220" y="370" font-family="monospace" font-size="10" fill="#888888" text-anchor="middle">
    of context for complex reasoning
  </text>
  
  <!-- Arrows between components -->
  <!-- LLM to REPL -->
  <path d="M 360 240 L 420 240" stroke="#00d9ff" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="390" y="235" font-family="monospace" font-size="9" fill="#888888" text-anchor="middle">code</text>
  
  <!-- REPL to LLM -->
  <path d="M 420 260 L 360 260" stroke="#00ff88" stroke-width="2" fill="none"/>
  <text x="390" y="275" font-family="monospace" font-size="9" fill="#888888" text-anchor="middle">output</text>
  
  <!-- LLM to Sub-LLM -->
  <path d="M 220 290 L 220 310" stroke="#a855f7" stroke-width="1.5" stroke-dasharray="4,2" fill="none"/>
  
  <!-- Loop indicator -->
  <path d="M 340 300 C 380 300 380 200 340 200" stroke="#00d9ff" stroke-width="1.5" fill="none" opacity="0.5"/>
  <text x="385" y="250" font-family="monospace" font-size="9" fill="#00d9ff" opacity="0.7">loop</text>
  
  <!-- Arrow down to result -->
  <path d="M 400 450 L 400 480 L 390 470 M 400 480 L 410 470" stroke="#00ff88" stroke-width="2" fill="none"/>
  
  <!-- FINAL Answer Box -->
  <rect x="250" y="490" width="300" height="50" rx="8" fill="#0a2818" stroke="url(#greenGrad)" stroke-width="2"/>
  <text x="400" y="520" font-family="monospace" font-size="14" fill="#00ff88" text-anchor="middle">
    FINAL(answer)
  </text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00d9ff"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="400" y="580" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="#555555" text-anchor="middle">
    Based on "Recursive Language Models" by Zhang, Kraska, and Khattab (MIT)
  </text>
</svg>
